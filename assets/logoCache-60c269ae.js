var C=Object.defineProperty;var g=(h,e,t)=>e in h?C(h,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[e]=t;var r=(h,e,t)=>(g(h,typeof e!="symbol"?e+"":e,t),t);import{_}from"./index-755a0c20.js";class E{constructor(){r(this,"cache",new Map);r(this,"CACHE_DURATION",24*60*60*1e3);r(this,"MAX_CACHE_SIZE",1e3)}getCacheKey(e,t){return`${t}_${e}`}isValidEntry(e){return Date.now()-e.timestamp<this.CACHE_DURATION}getLogo(e,t){const s=this.getCacheKey(e,t),i=this.cache.get(s);return i&&this.isValidEntry(i)?i:(i&&this.cache.delete(s),null)}setLogo(e,t,s,i=!1){const o=this.getCacheKey(e,t);this.cache.size>=this.MAX_CACHE_SIZE&&this.cleanupCache(),this.cache.set(o,{logoPath:s,timestamp:Date.now(),failed:i})}cleanupCache(){const e=Date.now(),t=[];this.cache.forEach((s,i)=>{e-s.timestamp>this.CACHE_DURATION&&t.push(i)}),t.forEach(s=>this.cache.delete(s)),this.cache.size>=this.MAX_CACHE_SIZE&&Array.from(this.cache.entries()).sort(([,o],[,a])=>o.timestamp-a.timestamp).slice(0,Math.floor(this.MAX_CACHE_SIZE*.2)).forEach(([o])=>this.cache.delete(o))}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,maxSize:this.MAX_CACHE_SIZE}}async preloadLogos(e){const t=e.filter(a=>!this.getLogo(a.id,a.type));if(t.length===0)return;const{getMovieDetails:s,getTVShowDetails:i}=await _(()=>import("./index-755a0c20.js").then(a=>a.t),["assets/index-755a0c20.js","assets/index-09e4e240.css"]),o=5;for(let a=0;a<t.length;a+=o){const l=t.slice(a,a+o);await Promise.allSettled(l.map(async c=>{try{const n=c.type==="movie"?await s(c.id):await i(c.id);this.setLogo(c.id,c.type,n.logo_path||null)}catch{this.setLogo(c.id,c.type,null,!0)}})),a+o<t.length&&await new Promise(c=>setTimeout(c,100))}}hasLogofailed(e,t){const s=this.getLogo(e,t);return(s==null?void 0:s.failed)===!0}}const p=new E;export{p as default,p as logoCache};
